#VRML_SIM R2022a utf8
WorldInfo {
  info [
    "Bicycle Simulation"
  ]
  title "Bicycle"
  CFM 0.0003
  ERP 0.6
  basicTimeStep 1
  lineScale 1
  contactProperties [
    ContactProperties {
      coulombFriction [
        8
      ]
      bounce 0.001
      softCFM 0.0003
    }
  ]
}
Viewpoint {
  orientation 0.07891188360519322 0.35466386881210893 -0.9316579065220815 0.6963235274706928
  position -0.6852502098425604 0.40540131275135505 0.27034836961046016
  near 0.1
  follow "Bicycle"
  followSmoothness 0.1
}
TexturedBackground {
}
TexturedBackgroundLight {
}
CircleArena {
  radius 200
  floorAppearance Parquetry {
    type "light strip"
  }
  floorTileSize 2 2
  wallThickness 0.1
  wallHeight 1
  wallAppearance OldPlywood {
  }
}
DEF sueprvisor Robot {
  translation 0 0 0.02
  controller "Bicycle_supervisor"
  supervisor TRUE
}
DEF MOTORCYCLE Bicycle {
  bicycle_shape FALSE
  CenterMass 0.2
  CenterHeight 0.04
  a 0.07
  b 0.157
  c 0.008
  lambda 1.05
  FrontWheelR 0.03
  RearWheelR 0.027
  WheelmassF 0.01
  WheelmassR 0.01
  FrontforkM 0.01
  tireRadius 0.003
  Xff 0.125
  Zff 0.08
  Addon [
    HingeJoint {
      jointParameters HingeJointParameters {
        position 0.5
        anchor 0.055 0 0.1
      }
      device [
        PositionSensor {
          name "pendulum_position"
        }
        RotationalMotor {
          name "balance_servo"
          controlPID 0.06612500000000002 0 0.005750000000000002
        }
      ]
      endPoint Solid {
        translation 0.055 -0.03224026735558633 0.13821734110113235
        rotation 1 0 0 0.7007685902024263
        children [
          Shape {
            appearance PBRAppearance {
            }
            geometry Sphere {
              radius 0.01
            }
          }
        ]
        boundingObject Shape {
          geometry Sphere {
            radius 0.01
          }
        }
        physics Physics {
          mass 0.025
        }
      }
    }
    Shape {
      appearance RoughPolymer {
        baseColor 0.1 0.1 0.1
      }
      geometry Mesh {
        url [
          "meshes/microbike_body.obj"
        ]
      }
    }
  ]
  Addon_Front [
    Transform {
      translation -0.125 0 -0.08
      scale 0.0254 0.0254 0.0254
      children [
        Shape {
          appearance RoughPolymer {
            baseColor 0.1 0.1 0.1
          }
          geometry Mesh {
            url [
              "meshes/microbike_fork.obj"
            ]
          }
        }
      ]
    }
  ]
  controller "PID_Steer_and_Balancer"
}
